/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Groovy library project to get you started.
 * For more details on building Java & JVM projects, please refer to https://docs.gradle.org/8.3/userguide/building_java_projects.html in the Gradle documentation.
 */

plugins {
    id 'groovy'
    id 'maven-publish'
    id 'com.gradle.plugin-publish' version '1.2.1'
}

group 'io.github.robhogan'
version '0.1.0-alpha.4'

repositories {
    mavenCentral()
}

dependencies {
    implementation gradleApi()
    implementation localGroovy()
}

// We intentionally don't build for Java 17 as users will see a cryptic bytecode version
// error first. Instead we produce a Java 11-compatible Gradle Plugin, so that AGP can print their
// nice message showing that JDK 11 (or 17) is required first
java { targetCompatibility = JavaVersion.VERSION_11 }

gradlePlugin { 
    website = 'https://reactnative.dev' 
    vcsUrl = 'https://github.com/facebook/react-native'
    plugins {
        nodeResolver {
            id = 'io.github.robhogan.noderesolver'
            displayName = 'React Node.JS resolver plugin'
            description = 'A Gradle Plugin for correctly resolving node_modules paths from your settings.gradle'
            tags.set(['react', 'node', 'nodejs', 'node_modules', 'resolver', 'resolution'])
            implementationClass = 'io.github.robhogan.noderesolver.NodeResolverPlugin'
        }
    }
}

publishing {
    repositories {
        maven {
            name = 'localPluginRepository'
            url = '../local-plugin-repository'
        }
    }
    publications {
        localMavenPublication(MavenPublication) {
            from components.java
            artifactId = 'noderesolver'
        }
    }
}